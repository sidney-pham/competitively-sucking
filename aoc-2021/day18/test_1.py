from one import *


def test():
    s1 = [[[[[9, 8], 1], 2], 3], 4]
    s2 = [7, [6, [5, [4, [3, 2]]]]]
    s3 = [[6, [5, [4, [3, 2]]]], 1]
    s4 = [[3, [2, [1, [7, 3]]]], [6, [5, [4, [3, 2]]]]]
    s5 = [[3, [2, [8, 0]]], [9, [5, [4, [3, 2]]]]]

    assert explode(s1) == [[[[0, 9], 2], 3], 4]
    assert explode(s2) == [7, [6, [5, [7, 0]]]]
    assert explode(s3) == [[6, [5, [7, 0]]], 3]
    assert explode(s4) == [[3, [2, [8, 0]]], [9, [5, [4, [3, 2]]]]]
    assert explode(s5) == [[3, [2, [8, 0]]], [9, [5, [7, 0]]]]

    assert explode([[[[[4, 3], 4], 4], [7, [[8, 4], 9]]], [1, 1]]) == [
        [[[0, 7], 4], [7, [[8, 4], 9]]],
        [1, 1],
    ]
    assert explode([[[[0, 7], 4], [7, [[8, 4], 9]]], [1, 1]]) == [
        [[[0, 7], 4], [15, [0, 13]]],
        [1, 1],
    ]
    assert split([[[[0, 7], 4], [15, [0, 13]]], [1, 1]]) == [
        [[[0, 7], 4], [[7, 8], [0, 13]]],
        [1, 1],
    ]
    assert split([[[[0, 7], 4], [[7, 8], [0, 13]]], [1, 1]]) == [
        [[[0, 7], 4], [[7, 8], [0, [6, 7]]]],
        [1, 1],
    ]
    assert explode([[[[0, 7], 4], [[7, 8], [0, [6, 7]]]], [1, 1]]) == [
        [[[0, 7], 4], [[7, 8], [6, 0]]],
        [8, 1],
    ]
    a4 = add(add(add([1, 1], [2, 2]), [3, 3]), [4, 4])
    assert a4 == [[[[1, 1], [2, 2]], [3, 3]], [4, 4]]
    assert add(a4, [5, 5]) == [[[[3, 0], [5, 3]], [4, 4]], [5, 5]]
    assert add(add(a4, [5, 5]), [6, 6]) == [[[[5, 0], [7, 4]], [5, 5]], [6, 6]]

    assert (
        reduce(
            [
                [[[0, [4, 5]], [0, 0]], [[[4, 5], [2, 6]], [9, 5]]],
                [7, [[[3, 7], [4, 3]], [[6, 3], [8, 8]]]],
            ]
        )
        == [[[[4, 0], [5, 4]], [[7, 7], [6, 0]]], [[8, [7, 7]], [[7, 9], [5, 0]]]]
    )

    assert (
        add(
            [[[[4, 0], [5, 4]], [[7, 7], [6, 0]]], [[8, [7, 7]], [[7, 9], [5, 0]]]],
            [[2, [[0, 8], [3, 4]]], [[[6, 7], 1], [7, [1, 6]]]],
        )
        == [[[[6, 7], [6, 7]], [[7, 7], [0, 7]]], [[[8, 7], [7, 7]], [[8, 8], [8, 0]]]]
    )

    assert (
        add(
            [[[[6, 6], [7, 7]], [[0, 7], [7, 7]]], [[[5, 5], [5, 6]], 9]],
            [1, [[[9, 3], 9], [[9, 0], [0, 7]]]],
        )
        == [[[[7, 8], [6, 7]], [[6, 8], [0, 8]]], [[[7, 7], [5, 0]], [[5, 5], [5, 6]]]]
    )

    assert add(
        [[[[6, 6], [6, 6]], [[6, 0], [6, 7]]], [[[7, 7], [8, 9]], [8, [8, 1]]]], [2, 9]
    ) == [[[[6, 6], [7, 7]], [[0, 7], [7, 7]]], [[[5, 5], [5, 6]], 9]]

    assert (
        add(
            [[[[7, 7], [7, 7]], [[8, 7], [8, 7]]], [[[7, 0], [7, 7]], 9]],
            [[[[4, 2], 2], 6], [8, 7]],
        )
        == [[[[8, 7], [7, 7]], [[8, 6], [7, 7]]], [[[0, 7], [6, 6]], [8, 7]]]
    )

    assert explode([[[[8, 0], [8, [6, 7]]], [[0, 17], 53]], [[[0, 4], 6], [8, 7]]]) == [
        [[[8, 0], [14, 0]], [[7, 17], 53]],
        [[[0, 4], 6], [8, 7]],
    ]
